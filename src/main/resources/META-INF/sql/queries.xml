<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">


	<bean id="queries" class="java.util.Properties">
		<constructor-arg index="0">
			<props>
				<prop key="get.feature.variation.points.filtered">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME, EXPRESSION 
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN CORE_ASSET ON ID_COREASSET=IDCOREASSET NATURAL JOIN DEVELOPER_BRIDGE
					  WHERE LOWER(ID_FEATURE)=? AND ID_DEVELOPER=? AND IDPRODUCTRELEASE=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>
				<prop key="get.feature.variation.points.product">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME ,EXPRESSION
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN CORE_ASSET ON ID_COREASSET=IDCOREASSET 
					  WHERE LOWER(ID_FEATURE)=? AND IDPRODUCTRELEASE=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>
				<prop key="get.feature.variation.points.developer">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME, EXPRESSION  
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN CORE_ASSET ON ID_COREASSET=IDCOREASSET NATURAL JOIN DEVELOPER_BRIDGE
					  WHERE LOWER(ID_FEATURE)=? AND ID_DEVELOPER=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>


				<prop key="get.features.customizations">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE 
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  WHERE ID_FEATURE!='NO FEATURE' GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.features.filtered">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_BRIDGE
					  WHERE ID_FEATURE!='NO FEATURE'  AND IDPRODUCTRELEASE=? AND ID_DEVELOPER=? GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.features.filtered.product">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  WHERE ID_FEATURE!='NO FEATURE'  AND IDPRODUCTRELEASE=? GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.features.filtered.developer">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_BRIDGE
					  WHERE ID_FEATURE!='NO FEATURE' AND ID_DEVELOPER=? GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.feature.variation.points">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME, EXPRESSION  
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN core_asset ON ID_COREASSET=IDCOREASSET
					  WHERE LOWER(ID_FEATURE)=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>
				<prop key="get.features.by.devgroup">
					<![CDATA[
						SELECT ID_FEATURE, id_developer_group, MAX(modified_lines) from
							(SELECT ID_FEATURE,id_developer_group, SUM(LINES_ADDED+LINES_DELETED) as modified_lines 
								  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								  WHERE ID_FEATURE!='NO FEATURE' GROUP BY ID_FEATURE, id_developer_group)
						     as a
					    group by id_feature ;
					]]>
				</prop>
				<prop key="get.vp.by.devgroup">
					<![CDATA[
						SELECT  ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), IDVARIATIONPOINT FROM
							(SELECT  ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES , IDVARIATIONPOINT
								  FROM   CUSTOMIZATION_FACT INNER JOIN features_in_variationpoints ON IDVARIATIONPOINT=ID_VARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								WHERE ID_FEATURE=? GROUP BY IDVARIATIONPOINT, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY IDVARIATIONPOINT ;	
					]]>
				</prop>
			</props>

		</constructor-arg>
	</bean>

</beans>
