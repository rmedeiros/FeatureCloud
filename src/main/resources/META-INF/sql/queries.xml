<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">


	<bean id="queries" class="java.util.Properties">
		<constructor-arg index="0">
			<props>
				<prop key="get.feature.variation.points.filtered.all">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME, EXPRESSION 
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN CORE_ASSET ON ID_COREASSET=IDCOREASSET  
					  WHERE LOWER(ID_FEATURE)=? AND ID_DEVELOPER_GROUP=? AND IDPRODUCTRELEASE=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>
				<prop key="get.feature.variation.points.filtered.product">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME ,EXPRESSION
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN CORE_ASSET ON ID_COREASSET=IDCOREASSET 
					  WHERE LOWER(ID_FEATURE)=? AND IDPRODUCTRELEASE=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>
				<prop key="get.feature.variation.points.filtered.developer">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME, EXPRESSION  
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN CORE_ASSET ON ID_COREASSET=IDCOREASSET
					  WHERE LOWER(ID_FEATURE)=? AND ID_DEVELOPER_GROUP=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>


				<prop key="get.features">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE 
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  WHERE ID_FEATURE!='NO FEATURE' GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.features.filtered.all">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT  
					  WHERE ID_FEATURE!='NO FEATURE'  AND IDPRODUCTRELEASE=? AND ID_DEVELOPER_GROUP=? GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.features.filtered.product">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  WHERE ID_FEATURE!='NO FEATURE'  AND IDPRODUCTRELEASE=? GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.features.filtered.developer">
			  		<![CDATA[
					  SELECT FEATURE_NAME,SUM(LINES_ADDED),SUM(LINES_DELETED), ID_FEATURE
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT  
					  WHERE ID_FEATURE!='NO FEATURE' AND ID_DEVELOPER_GROUP=? GROUP BY FEATURE_NAME;
					]]>
				</prop>
				<prop key="get.feature.variation.points">
			  		<![CDATA[
					  SELECT IDVARIATIONPOINT,SUM(LINES_ADDED),SUM(LINES_DELETED), IDCOREASSET, NAME, EXPRESSION  
					  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT
					  INNER JOIN core_asset ON ID_COREASSET=IDCOREASSET
					  WHERE LOWER(ID_FEATURE)=? GROUP BY IDVARIATIONPOINT;
					]]>
				</prop>
				<prop key="get.features.by.devgroup">
					<![CDATA[
						 SELECT ID_FEATURE, ID_DEVELOPER_GROUP, MODIFIED_LINES, COLOR from (
                                 SELECT ID_FEATURE,ID_DEVELOPER_GROUP, COLOR, sum(LINES_ADDED+LINES_DELETED) as modified_lines
								  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								  WHERE ID_FEATURE!='NO FEATURE'
                                  group by id_feature, ID_DEVELOPER_GROUP) as a 
                                  where modified_lines = ( SELECT MAX(modified_lines) from(
																SELECT ID_FEATURE,ID_DEVELOPER_GROUP, COLOR, sum(LINES_ADDED+LINES_DELETED) as modified_lines
																  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
																  WHERE ID_FEATURE!='NO FEATURE'
																  group by id_feature, ID_DEVELOPER_GROUP) as b
																  group by id_feature
																  HAVING id_feature = a.id_feature);
					]]>
				</prop>
				<prop key="get.features.by.devgroup.filtered.product">
					<![CDATA[
						SELECT ID_FEATURE, ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), COLOR FROM
							(SELECT ID_FEATURE,ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES, COLOR 
								  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								  WHERE ID_FEATURE!='NO FEATURE' AND IDPRODUCTRELEASE=?  GROUP BY ID_FEATURE, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY ID_FEATURE, ID_DEVELOPER_GROUP;
					]]>
				</prop>
				<prop key="get.features.by.devgroup.filtered.developer">
					<![CDATA[
						SELECT ID_FEATURE, ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), COLOR FROM
							(SELECT ID_FEATURE,ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES, COLOR 
								  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								  WHERE ID_FEATURE!='NO FEATURE' AND ID_DEVELOPER_GROUP=? GROUP BY ID_FEATURE, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY ID_FEATURE, ID_DEVELOPER_GROUP;
					]]>
				</prop>
				<prop key="get.features.by.devgroup.filtered.all">
					<![CDATA[
						SELECT ID_FEATURE, ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), COLOR FROM
							(SELECT ID_FEATURE,ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES, COLOR 
								  FROM FEATURES_IN_VARIATIONPOINTS INNER JOIN CUSTOMIZATION_FACT ON ID_VARIATIONPOINT=IDVARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								  WHERE ID_FEATURE!='NO FEATURE' AND IDPRODUCTRELEASE=? AND ID_DEVELOPER_GROUP=?  GROUP BY ID_FEATURE, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY ID_FEATURE, ID_DEVELOPER_GROUP;
					]]>
				</prop>





				<prop key="get.vp.by.devgroup">
					<![CDATA[
						SELECT  ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), IDVARIATIONPOINT, COLOR FROM
							(SELECT  ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES , IDVARIATIONPOINT, COLOR
								  FROM   CUSTOMIZATION_FACT INNER JOIN features_in_variationpoints ON IDVARIATIONPOINT=ID_VARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								WHERE ID_FEATURE=? GROUP BY IDVARIATIONPOINT, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY IDVARIATIONPOINT,ID_DEVELOPER_GROUP;	
					]]>
				</prop>
				<prop key="get.vp.by.devgroup.filtered.product">
					<![CDATA[
						SELECT  ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), IDVARIATIONPOINT, COLOR FROM
							(SELECT  ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES , IDVARIATIONPOINT, COLOR
								  FROM   CUSTOMIZATION_FACT INNER JOIN features_in_variationpoints ON IDVARIATIONPOINT=ID_VARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								WHERE ID_FEATURE=? AND IDPRODUCTRELEASE=? GROUP BY IDVARIATIONPOINT, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY IDVARIATIONPOINT,ID_DEVELOPER_GROUP;	
					]]>
				</prop>
				<prop key="get.vp.by.devgroup.filtered.developer">
					<![CDATA[
						SELECT  ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), IDVARIATIONPOINT, COLOR FROM
							(SELECT  ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES , IDVARIATIONPOINT, COLOR
								  FROM   CUSTOMIZATION_FACT INNER JOIN features_in_variationpoints ON IDVARIATIONPOINT=ID_VARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								WHERE ID_FEATURE=? AND ID_DEVELOPER_GROUP=?  GROUP BY IDVARIATIONPOINT, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY IDVARIATIONPOINT,ID_DEVELOPER_GROUP;	
					]]>
				</prop>
				<prop key="get.vp.by.devgroup.filtered.all">
					<![CDATA[
						SELECT  ID_DEVELOPER_GROUP, MAX(MODIFIED_LINES), IDVARIATIONPOINT, COLOR FROM
							(SELECT  ID_DEVELOPER_GROUP, SUM(LINES_ADDED+LINES_DELETED) AS MODIFIED_LINES , IDVARIATIONPOINT, COLOR
								  FROM   CUSTOMIZATION_FACT INNER JOIN features_in_variationpoints ON IDVARIATIONPOINT=ID_VARIATIONPOINT NATURAL JOIN DEVELOPER_GROUP
								WHERE ID_FEATURE=? AND ID_DEVELOPER_GROUP=? AND IDPRODUCTRELEASE=?  GROUP BY IDVARIATIONPOINT, ID_DEVELOPER_GROUP)
						     AS A
					    GROUP BY IDVARIATIONPOINT,ID_DEVELOPER_GROUP;	
					]]>
				</prop>

				<prop key="get.diffvalues">
					<![CDATA[
					SELECT custom_diff, name FROM customization_fact natural join product_release where idvariationpoint=?;					
					]]>
				</prop>

			</props>

		</constructor-arg>
	</bean>

</beans>
